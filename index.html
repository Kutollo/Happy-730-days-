<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Fasting App</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',sans-serif;background:#0f172a;color:#f8fafc;overflow-x:hidden;}
.container{max-width:1200px;margin:auto;padding:20px;display:grid;grid-template-columns:1fr 1fr;gap:20px;}
h1{grid-column:1/-1;text-align:center;color:#6366f1;margin-bottom:15px;font-size:2rem;}
.timer{grid-column:1/-1;text-align:center;font-size:1.3rem;font-weight:600;margin-bottom:20px;color:#facc15;position:relative;}
.card{background:#1e293b;border-radius:20px;padding:25px;box-shadow:0 10px 20px rgba(0,0,0,0.5);position:relative;overflow:hidden;transition:transform 0.3s;}
.card:hover{transform:translateY(-5px);}
.gradient-bg{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;border-radius:20px;background:linear-gradient(135deg,#6366f1,#fbbf24);opacity:0.25;animation:gradient 8s ease infinite;}
@keyframes gradient{0%{background:linear-gradient(135deg,#6366f1,#fbbf24);}
25%{background:linear-gradient(135deg,#f43f5e,#10b981);}
50%{background:linear-gradient(135deg,#facc15,#3b82f6);}
75%{background:linear-gradient(135deg,#8b5cf6,#f472b6);}
100%{background:linear-gradient(135deg,#6366f1,#fbbf24);}}
.card h2{position:relative;z-index:1;margin-bottom:10px;color:#fbbf24;}
.verse{background:#334155;padding:12px;border-radius:12px;margin:12px 0;position:relative;z-index:1;}
.prayer-point{background:#1e40af;padding:8px 12px;border-radius:12px;margin:6px 4px 6px 0;display:inline-block;font-weight:500;cursor:pointer;transition:0.2s;position:relative;z-index:1;}
.prayer-point.active{background:#fbbf24;color:#0f172a;transform:scale(1.1);}
textarea{width:100%;height:120px;padding:12px;border-radius:12px;border:none;margin-top:12px;resize:none;background:#334155;color:white;position:relative;z-index:1;}
.btn{background:#6366f1;color:white;border:none;padding:10px 18px;border-radius:12px;cursor:pointer;font-weight:600;margin-top:10px;position:relative;z-index:1;transition:0.2s;}
.btn:hover{background:#818cf8;}
canvas{grid-column:1/-1;margin-top:20px;background:#1e293b;border-radius:20px;padding:15px;}
@media(max-width:900px){.container{grid-template-columns:1fr;}}
</style>
</head>
<body>
<h1>Premium 10-Day Fasting App</h1>
<div class="timer" id="timer">Loading timer...</div>
<div class="container">
  <div class="card">
    <div class="gradient-bg"></div>
    <h2 id="dayTitle"></h2>
    <p id="dayFocus"></p>
    <div class="verse" id="verse"></div>
    <div id="prayerPoints" class="prayer-point-container"></div>
    <textarea id="notes" placeholder="Journal notes..."></textarea>
    <button class="btn" onclick="saveNotes()">Save Notes</button>
  </div>
  <div class="card">
    <div class="gradient-bg"></div>
    <h2>Next Day Preview</h2>
    <p id="nextDayFocus"></p>
    <div class="verse" id="nextVerse"></div>
    <div id="nextPrayerPoints" class="prayer-point-container"></div>
  </div>
  <canvas id="progressChart" width="800" height="200"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
// Start date is tomorrow
let startISO = new Date(); startISO.setDate(startISO.getDate()+1); startISO=startISO.toISOString().slice(0,10);

const PLAN=[
{ day:1,type:"Water",focus:"Cleansing & repentance",scripture:"Psalm 51:10–12",prayerPoints:["Repent of all sin","Ask for cleansing","Pray for pure heart"] },
{ day:2,type:"Dry",focus:"Break sexual strongholds",scripture:"1 Thess 4:3–4",prayerPoints:["Break lust","Pray for self-control","Resist temptation"] },
{ day:3,type:"Water",focus:"Renewed mind & purity",scripture:"Romans 12:1–2",prayerPoints:["Renew mind","Pray for holiness","Commit to righteousness"] },
{ day:4,type:"Esther",focus:"R60 000 fees breakthrough",scripture:"Esther 4:16",prayerPoints:["Pray for funding","Open financial doors","Trust God's provision"] },
{ day:5,type:"Water",focus:"Provision & favour",scripture:"Philippians 4:19",prayerPoints:["Bless finances","Ask for favour","Receive provision"] },
{ day:6,type:"Dry",focus:"Brother: freedom from alcohol",scripture:"Isaiah 61:1–3",prayerPoints:["Deliver brother","Pray for strength","Break addictions"] },
{ day:7,type:"Water",focus:"Family forgiveness & restoration",scripture:"Colossians 3:13",prayerPoints:["Forgive family","Restore relationships","Pray for unity"] },
{ day:8,type:"Dry",focus:"Healing from depression",scripture:"Psalm 34:17–18",prayerPoints:["Pray for healing","Peace of mind","Joy restoration"] },
{ day:9,type:"Water",focus:"Thanksgiving & sealing",scripture:"Philippians 4:6–7",prayerPoints:["Thank God","Seal breakthroughs","Praise continually"] },
{ day:10,type:"Esther",focus:"Final push for all points",scripture:"Joel 2:12–13",prayerPoints:["Cover all prayers","Pray for victory","Commit fully"] }
];

let checks=JSON.parse(localStorage.getItem('fs_checks')||'{}');
let notes=localStorage.getItem('fs_notes')||'';

function getCurrentDay(){const today=new Date();const start=new Date(startISO);const diff=Math.floor((today-start)/(1000*60*60*24));return Math.min(Math.max(diff,0),PLAN.length-1);}
function renderDay(){const idx=getCurrentDay();const day=PLAN[idx];const nextDay=PLAN[Math.min(idx+1,PLAN.length-1)];document.getElementById('dayTitle').innerText=`Day ${day.day}: ${day.type} Fast`;document.getElementById('dayFocus').innerText=day.focus;document.getElementById('verse').innerText=`Verse: ${day.scripture}`;const pbContainer=document.getElementById('prayerPoints');pbContainer.innerHTML='';day.prayerPoints.forEach((p,i)=>{const active=checks[`d${day.day}`]?.[i]?'active':'';const btn=document.createElement('span');btn.className=`prayer-point ${active}`;btn.innerText=p;btn.onclick=()=>toggleCheck(i);pbContainer.appendChild(btn);});document.getElementById('notes').value=notes;document.getElementById('nextDayFocus').innerText=nextDay.focus;document.getElementById('nextVerse').innerText=`Verse: ${nextDay.scripture}`;const nextContainer=document.getElementById('nextPrayerPoints');nextContainer.innerHTML='';nextDay.prayerPoints.forEach(p=>{const span=document.createElement('span');span.className='prayer-point';span.innerText=p;nextContainer.appendChild(span);});}
function toggleCheck(idx){const day=PLAN[getCurrentDay()].day;checks[`d${day}`]=checks[`d${day}`]||{};checks[`d${day}`][idx]=!checks[`d${day}`][idx];localStorage.setItem('fs_checks',JSON.stringify(checks));renderDay();renderProgressChart();if(Object.values(checks[`d${day}`]).filter(v=>v).length===PLAN[getCurrentDay()].prayerPoints.length){confetti({particleCount:150,spread:70,origin:{y:0.6}});}}
function saveNotes(){notes=document.getElementById('notes').value;localStorage.setItem('fs_notes',notes);alert('Notes saved!');}
function renderProgressChart(){const data=PLAN.map(p=>{const dayChecks=checks[`d${p.day}`]||{};const pct=Math.round((Object.values(dayChecks).filter(v=>v).length/p.prayerPoints.length)*100);return {day:`D${p.day}`,completion:pct};});const ctx=document.getElementById('progressChart').getContext('2d');if(window.chart)window.chart.destroy();window.chart=new Chart(ctx,{type:'line',data:{labels:data.map(d=>d.day),datasets:[{label:'Completion %',data:data.map(d=>d.completion),fill:true,backgroundColor:'rgba(99,102,241,0.2)',borderColor:'#6366f1',tension:0.4}]},options:{responsive:true,scales:{y:{beginAtZero:true,max:100}}}});}
function updateTimer(){const now=new Date();const start=new Date();start.setHours(0,0,0,0);const end=new Date();end.setHours(17,0,0,0);let diff=now<start?start-now:end-now;if(diff<0)diff=0;const hrs=Math.floor(diff/1000/60/60);const mins=Math.floor((diff/1000/60)%60);const secs=Math.floor((diff/1000)%60);const label=now>=start&&now<=end?'Time left in fast':'Time until fast starts';document.getElementById('timer').innerText=`${label}: ${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;}
setInterval(updateTimer,1000);
renderDay();
renderProgressChart();
</script>
</body>
</html>
